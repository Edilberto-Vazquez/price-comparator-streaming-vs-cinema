(()=>{"use strict";var e={245:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends HTMLFormElement{constructor(){super()}getStyles(){return"\n      <style>\n        .movies-form {\n          width: 300px;\n          height: 110px;\n          display: grid;\n          row-gap: 5px;\n        }\n        .movies-form__label {\n          width: 100%;\n          height: 50px;\n          border-radius: 10px;\n        }\n        .movies-form__input {\n          width: 100%;\n          height: 50px;\n          display: grid;\n          padding-left: 20px;\n          border: none;\n          border-radius: 5px;\n          font-size: 1.6rem;\n          background: rgb(49, 52, 62);\n          color: white;\n          caret-color: white;\n        }\n        .movies-form__input:focus-visible {\n          outline: none;\n          border: 1px solid rgb(168, 169, 173);\n        }\n        .movies-form__input::placeholder {\n          color: rgb(168, 169, 173);\n        }\n      </style>\n    "}getTemplate(){const e=document.createElement("template");return e.innerHTML=`\n        <label class="movies-form__label" for="numMovies">\n          <input class="movies-form__input" type="number" name="numMovies" id="numMovies" placeholder="Películas que ves al mes">\n        </label>\n        <label class="movies-form__label" for="moviePrice">\n          <input class="movies-form__input" type="number" name="moviePrice" id="moviePrice" placeholder="Precio de la película">\n        </label>\n      ${this.getStyles()}\n    `,e}render(){this.className="movies-form",this.append(this.getTemplate().content.cloneNode(!0))}connectedCallback(){this.render()}}customElements.define("movies-form",n,{extends:"form"}),t.default=n},543:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends HTMLElement{constructor(e,t,n,r){super(),this.attachShadow({mode:"open"}),this._name=e,this._image=t,this._display=n,this.handleClick=r.bind(this),this._observer=new MutationObserver((e=>this.onDomChanged))}get name(){return this._name}set name(e){this._name=e}get image(){return this._image}set image(e){this._image=e}get display(){return this._display}set display(e){this._display=e}getStyles(){return"\n      <style>\n        :host {\n          width: 75px;\n          height: 75px;\n          display: grid;\n        }\n        .img-wrapper{\n          width: 75px;\n          height: 75px;\n        }\n        .img-wrapper__img{\n          width: 100%;\n          height: auto;\n        }\n      </style>\n    "}getTemplete(){const e=document.createElement("template");return e.innerHTML=`\n      <div class="img-wrapper">\n        <img class="img-wrapper__img" src=${this.image} alt=${this.name}>\n      </div>\n      ${this.getStyles()}\n    `,e}render(){this.addEventListener("click",this.handleClick),this.shadowRoot?.append(this.getTemplete().content.cloneNode(!0))}onDomChanged(e){}connectedCallback(){this.render()}static get observedAttributes(){return["name","image","display"]}attributeChangedCallback(e,t,n){"name"===e&&(this.name=n),"image"===e&&(this.image=n),"display"===e&&(this.display=n)}disconnectedCallback(){this._observer.disconnect,this.removeEventListener("click",this.handleClick)}}customElements.define("streaming-platform-button",n),t.default=n},576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"}),this._properties=e,this._observer=new MutationObserver((e=>this.onDomChanged(e)))}get properties(){return this._properties}set properties(e){this._properties=e}getSyles(){return"\n      <style>\n        * {\n          box-sizing: border-box;\n          margin: 0;\n          padding: 0;\n        }\n        :host {\n          width: 100%;\n          max-width: 450px;\n          height: 380px;\n          display: grid;\n          animation: fade 0.4s linear;\n        }\n        .streaming-platform-card {\n          width: 100%;\n          height: 100%;\n          padding: 24px 24px;\n          display: grid;\n          grid-auto-rows: min-content;\n          place-items: center;\n          gap: 14px;\n          border-radius: 10px;\n          background: #040714;\n        }\n        .streaming-platform-card__image {\n          width: 100%;\n          height: 100px;\n        }\n        .streaming-platform-card__description {\n          display: grid;\n          row-gap: 14px;\n          font-size: 1.8rem;\n          color: white;\n        }\n        @keyframes fade {\n          from {\n            opacity: 0;\n            transform: translateX(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateX(0)\n          }\n        }\n      <style>\n    "}getTemplate(){const e=document.createElement("template");return e.innerHTML=`\n      <article class="streaming-platform-card">\n        <img src=${this.properties.img} alt="streaming platform" class="streaming-platform-card__image" />\n        <div class="streaming-platform-card__description">\n        <span>Costo mensual del cine: ${this.formatPrice(this.properties.cinemaprice)} </span>\n          ${this.priceComparator(this.properties.plans)}\n        </div>\n        </span>\n      </article>\n      ${this.getSyles()}\n    `,e}priceComparator(e){return e.map((e=>{const t=12*this.properties.cinemaprice;return"Anual"===e.plan?`<span>Plan ${e.plan}: ${this.formatPrice(e.price)} ${this.saveMoney(e.price,t)}</span>`:"Anual"!==e.plan?`<span>Plan ${e.plan}: ${this.formatPrice(e.price)} ${this.saveMoney(e.price,this.properties.cinemaprice)}</span>`:void 0})).join("")}saveMoney(e,t){return e<t?`ahorras: ${this.formatPrice(Math.abs(e-t))}`:`pierdes: ${this.formatPrice(Math.abs(e-t))}`}formatPrice(e){return new window.Intl.NumberFormat("en-EN",{style:"currency",currency:"MXN"}).format(e)}render(){this.setAttribute("id",this.properties.id),this.shadowRoot?.appendChild(this.getTemplate().content.cloneNode(!0))}onDomChanged(e){}connectedCallback(){for(this._observer.observe(this,{attributes:!0,characterData:!0,subtree:!0,childList:!0});this.shadowRoot?.firstChild;)this.shadowRoot?.removeChild(this.shadowRoot?.firstChild);this.render()}static get observedAttributes(){return["properties"]}attributeChangedCallback(e,t,n){"properties"===e&&(this.properties=n)}disconnectedCallback(){this._observer.disconnect()}}customElements.define("streaming-platform-card",n),t.default=n},820:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(595));window.addEventListener("load",i.default),window.addEventListener("hashchange",i.default)},595:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(245)),s=r(n(543)),a=r(n(576)),o=r(n(819));t.default=()=>{let e=o.default,t={numMovies:0,moviePrice:0};const n=n=>{n.target.display=!n.target.display;const r=e.find((e=>e.id===n.target.name)),i=document.querySelector(".streaming-platforms-cards"),s=t.numMovies*t.moviePrice;n.target.display?i?.append(new a.default({...r,cinemaprice:s})):i?.removeChild(document.querySelector(`#${n.target.name}`))},r=document.getElementById("app"),l=new i.default,p=e.map((e=>new s.default(e.id,e.icon,!1,n))),c=document.createElement("div");c.className="streaming-platforms-buttons",c.append(...p);const d=document.createElement("div");d.className="streaming-platforms-cards",r?.addEventListener("input",(e=>{if("movies-form__input"===e.target.className&&(t={...t,[e.target.name]:e.target.value}),document.querySelectorAll(".streaming-platforms-cards").length>0){let e=[...document.querySelectorAll("streaming-platform-card")];const n=t.numMovies*t.moviePrice;e=e.map((e=>(e.properties.cinemaprice=n,e))),document.querySelector(".streaming-platforms-cards").innerHTML="",document.querySelector(".streaming-platforms-cards")?.append(...e)}})),r?.append(l,c,d)}},819:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(911)),s=r(n(880)),a=r(n(345)),o=r(n(662)),l=r(n(67)),p=r(n(42)),c=[{id:"amazon",img:o.default,icon:i.default,plans:[{plan:"Mensual",price:75},{plan:"Anual",price:899}]},{id:"netflix",img:l.default,icon:s.default,plans:[{plan:"Básico",price:139},{plan:"Estándar",price:196},{plan:"Premium",price:266}]},{id:"disney",img:p.default,icon:a.default,plans:[{plan:"Mensual",price:159},{plan:"Anual",price:1599}]}];t.default=c},911:(e,t,n)=>{e.exports=n.p+"assets/0cb82d2772011cc6edf3.svg"},880:(e,t,n)=>{e.exports=n.p+"assets/3f8708a6bdaf7064c9e5.svg"},345:(e,t,n)=>{e.exports=n.p+"assets/106902c99265ceaf2b94.svg"},662:(e,t,n)=>{e.exports=n.p+"assets/839d08c3936894ad7c81.svg"},42:(e,t,n)=>{e.exports=n.p+"assets/8205aae82a3c67ca943e.svg"},67:(e,t,n)=>{e.exports=n.p+"assets/5787551b8de42aef368c.svg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n(820)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0JRLEVBQUVNLFNBQVcsSUFDdEYsSUFBSWhILEVBQVdrRyxFQUFvQlEsRUFBRTFHLFNBQ3JDLElBQUs4RyxHQUFhOUcsSUFDYkEsRUFBU2lILGdCQUNaSCxFQUFZOUcsRUFBU2lILGNBQWNDLE1BQy9CSixHQUFXLENBQ2YsSUFBSUssRUFBVW5ILEVBQVNvSCxxQkFBcUIsVUFDekNELEVBQVFwQixTQUFRZSxFQUFZSyxFQUFRQSxFQUFRcEIsT0FBUyxHQUFHbUIsS0FLN0QsSUFBS0osRUFBVyxNQUFNLElBQUlPLE1BQU0seURBQ2hDUCxFQUFZQSxFQUFVUSxRQUFRLE9BQVEsSUFBSUEsUUFBUSxRQUFTLElBQUlBLFFBQVEsWUFBYSxLQUNwRnBCLEVBQW9CcUIsRUFBSVQsRyxHQ1pFWixFQUFvQixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJpY2UtY29tcGFyYXRvci1zdHJlYW1pbmctdnMtY2luZW1hLy4vc3JjL2NvbXBvbmVudHMvbW92aWVzLWZvcm0udHMiLCJ3ZWJwYWNrOi8vcHJpY2UtY29tcGFyYXRvci1zdHJlYW1pbmctdnMtY2luZW1hLy4vc3JjL2NvbXBvbmVudHMvc3RyZWFtaW5nLXBsYXRmb3JtLWJ1dHRvbi50cyIsIndlYnBhY2s6Ly9wcmljZS1jb21wYXJhdG9yLXN0cmVhbWluZy12cy1jaW5lbWEvLi9zcmMvY29tcG9uZW50cy9zdHJlYW1pbmctcGxhdGZvcm0tY2FyZC50cyIsIndlYnBhY2s6Ly9wcmljZS1jb21wYXJhdG9yLXN0cmVhbWluZy12cy1jaW5lbWEvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcHJpY2UtY29tcGFyYXRvci1zdHJlYW1pbmctdnMtY2luZW1hLy4vc3JjL3BhZ2VzL1ByaWNlQ29tcGFyYXRvci50cyIsIndlYnBhY2s6Ly9wcmljZS1jb21wYXJhdG9yLXN0cmVhbWluZy12cy1jaW5lbWEvLi9zcmMvdXRpbHMvZGF0YS50cyIsIndlYnBhY2s6Ly9wcmljZS1jb21wYXJhdG9yLXN0cmVhbWluZy12cy1jaW5lbWEvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcHJpY2UtY29tcGFyYXRvci1zdHJlYW1pbmctdnMtY2luZW1hL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vcHJpY2UtY29tcGFyYXRvci1zdHJlYW1pbmctdnMtY2luZW1hL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3ByaWNlLWNvbXBhcmF0b3Itc3RyZWFtaW5nLXZzLWNpbmVtYS93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgTW92aWVzRm9ybSBleHRlbmRzIEhUTUxGb3JtRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0U3R5bGVzKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxzdHlsZT5cbiAgICAgICAgLm1vdmllcy1mb3JtIHtcbiAgICAgICAgICB3aWR0aDogMzAwcHg7XG4gICAgICAgICAgaGVpZ2h0OiAxMTBweDtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIHJvdy1nYXA6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAubW92aWVzLWZvcm1fX2xhYmVsIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBoZWlnaHQ6IDUwcHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAubW92aWVzLWZvcm1fX2lucHV0IHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBoZWlnaHQ6IDUwcHg7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICBmb250LXNpemU6IDEuNnJlbTtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2IoNDksIDUyLCA2Mik7XG4gICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgIGNhcmV0LWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgfVxuICAgICAgICAubW92aWVzLWZvcm1fX2lucHV0OmZvY3VzLXZpc2libGUge1xuICAgICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiKDE2OCwgMTY5LCAxNzMpO1xuICAgICAgICB9XG4gICAgICAgIC5tb3ZpZXMtZm9ybV9faW5wdXQ6OnBsYWNlaG9sZGVyIHtcbiAgICAgICAgICBjb2xvcjogcmdiKDE2OCwgMTY5LCAxNzMpO1xuICAgICAgICB9XG4gICAgICA8L3N0eWxlPlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0VGVtcGxhdGUoKTogSFRNTFRlbXBsYXRlRWxlbWVudCB7XG4gICAgY29uc3QgdGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJtb3ZpZXMtZm9ybV9fbGFiZWxcIiBmb3I9XCJudW1Nb3ZpZXNcIj5cbiAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJtb3ZpZXMtZm9ybV9faW5wdXRcIiB0eXBlPVwibnVtYmVyXCIgbmFtZT1cIm51bU1vdmllc1wiIGlkPVwibnVtTW92aWVzXCIgcGxhY2Vob2xkZXI9XCJQZWzDrWN1bGFzIHF1ZSB2ZXMgYWwgbWVzXCI+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIDxsYWJlbCBjbGFzcz1cIm1vdmllcy1mb3JtX19sYWJlbFwiIGZvcj1cIm1vdmllUHJpY2VcIj5cbiAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJtb3ZpZXMtZm9ybV9faW5wdXRcIiB0eXBlPVwibnVtYmVyXCIgbmFtZT1cIm1vdmllUHJpY2VcIiBpZD1cIm1vdmllUHJpY2VcIiBwbGFjZWhvbGRlcj1cIlByZWNpbyBkZSBsYSBwZWzDrWN1bGFcIj5cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICR7dGhpcy5nZXRTdHlsZXMoKX1cbiAgICBgO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogdm9pZCB7XG4gICAgdGhpcy5jbGFzc05hbWUgPSBcIm1vdmllcy1mb3JtXCI7XG4gICAgdGhpcy5hcHBlbmQodGhpcy5nZXRUZW1wbGF0ZSgpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgfVxuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm1vdmllcy1mb3JtXCIsIE1vdmllc0Zvcm0sIHsgZXh0ZW5kczogXCJmb3JtXCIgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IE1vdmllc0Zvcm07XG4iLCJjbGFzcyBTdHJlYW1pbmdQbGF0Zm9ybUJ1dHRvbiBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgcHJvdGVjdGVkIF9uYW1lOiBzdHJpbmc7XG4gIHByb3RlY3RlZCBfaW1hZ2U6IHN0cmluZztcbiAgcHJvdGVjdGVkIF9kaXNwbGF5OiBib29sZWFuO1xuICBwcm90ZWN0ZWQgaGFuZGxlQ2xpY2s6IChldmVudDogYW55KSA9PiBhbnk7XG4gIHByb3RlY3RlZCBfb2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGltYWdlOiBzdHJpbmcsXG4gICAgZGlzcGxheTogYm9vbGVhbixcbiAgICBoYW5kbGVDbGljazogKGV2ZW50OiBhbnkpID0+IGFueVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5faW1hZ2UgPSBpbWFnZTtcbiAgICB0aGlzLl9kaXNwbGF5ID0gZGlzcGxheTtcbiAgICB0aGlzLmhhbmRsZUNsaWNrID0gaGFuZGxlQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKFxuICAgICAgKG11dGF0aW9uczogTXV0YXRpb25SZWNvcmRbXSkgPT4gdGhpcy5vbkRvbUNoYW5nZWRcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGdldCBuYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gIH1cblxuICBwdWJsaWMgc2V0IG5hbWUodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX25hbWUgPSB2YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaW1hZ2UoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5faW1hZ2U7XG4gIH1cblxuICBwdWJsaWMgc2V0IGltYWdlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9pbWFnZSA9IHZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldCBkaXNwbGF5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9kaXNwbGF5O1xuICB9XG5cbiAgcHVibGljIHNldCBkaXNwbGF5KHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fZGlzcGxheSA9IHZhbHVlO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldFN0eWxlcygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgXG4gICAgICA8c3R5bGU+XG4gICAgICAgIDpob3N0IHtcbiAgICAgICAgICB3aWR0aDogNzVweDtcbiAgICAgICAgICBoZWlnaHQ6IDc1cHg7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgfVxuICAgICAgICAuaW1nLXdyYXBwZXJ7XG4gICAgICAgICAgd2lkdGg6IDc1cHg7XG4gICAgICAgICAgaGVpZ2h0OiA3NXB4O1xuICAgICAgICB9XG4gICAgICAgIC5pbWctd3JhcHBlcl9faW1ne1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgfVxuICAgICAgPC9zdHlsZT5cbiAgICBgO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldFRlbXBsZXRlKCk6IEhUTUxUZW1wbGF0ZUVsZW1lbnQge1xuICAgIGNvbnN0IHRlbXBsZXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgIHRlbXBsZXRlLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJpbWctd3JhcHBlclwiPlxuICAgICAgICA8aW1nIGNsYXNzPVwiaW1nLXdyYXBwZXJfX2ltZ1wiIHNyYz0ke3RoaXMuaW1hZ2V9IGFsdD0ke3RoaXMubmFtZX0+XG4gICAgICA8L2Rpdj5cbiAgICAgICR7dGhpcy5nZXRTdHlsZXMoKX1cbiAgICBgO1xuICAgIHJldHVybiB0ZW1wbGV0ZTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKSB7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVDbGljayk7XG4gICAgdGhpcy5zaGFkb3dSb290Py5hcHBlbmQodGhpcy5nZXRUZW1wbGV0ZSgpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvbkRvbUNoYW5nZWQobXV0YXRpb25zOiBNdXRhdGlvblJlY29yZFtdKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGNvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFtcIm5hbWVcIiwgXCJpbWFnZVwiLCBcImRpc3BsYXlcIl07XG4gIH1cblxuICBwdWJsaWMgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBvbGRWYWx1ZTogYW55LFxuICAgIG5ld1ZhbHVlOiBhbnlcbiAgKTogdm9pZCB7XG4gICAgaWYgKG5hbWUgPT09IFwibmFtZVwiKSB7XG4gICAgICB0aGlzLm5hbWUgPSBuZXdWYWx1ZTtcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09IFwiaW1hZ2VcIikge1xuICAgICAgdGhpcy5pbWFnZSA9IG5ld1ZhbHVlO1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gXCJkaXNwbGF5XCIpIHtcbiAgICAgIHRoaXMuZGlzcGxheSA9IG5ld1ZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkaXNjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICB0aGlzLl9vYnNlcnZlci5kaXNjb25uZWN0O1xuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlQ2xpY2spO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInN0cmVhbWluZy1wbGF0Zm9ybS1idXR0b25cIiwgU3RyZWFtaW5nUGxhdGZvcm1CdXR0b24pO1xuXG5leHBvcnQgZGVmYXVsdCBTdHJlYW1pbmdQbGF0Zm9ybUJ1dHRvbjtcbiIsImludGVyZmFjZSBQcm9wZXJ0aWVzIHtcbiAgaWQ6IHN0cmluZztcbiAgaW1nOiBzdHJpbmc7XG4gIHBsYW5zOiB7IHBsYW46IHN0cmluZzsgcHJpY2U6IG51bWJlciB9W107XG4gIGNpbmVtYXByaWNlOiBudW1iZXI7XG59XG5cbmNsYXNzIFN0cmVhbWluZ1BsYXRmb3JtQ2FyZCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgcHJvdGVjdGVkIF9wcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzO1xuICBwcm90ZWN0ZWQgX29ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM6IFByb3BlcnRpZXMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XG4gICAgdGhpcy5fcHJvcGVydGllcyA9IHByb3BlcnRpZXM7XG4gICAgdGhpcy5fb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PlxuICAgICAgdGhpcy5vbkRvbUNoYW5nZWQobXV0YXRpb25zKVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHByb3BlcnRpZXMoKTogUHJvcGVydGllcyB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb3BlcnRpZXM7XG4gIH1cblxuICBwdWJsaWMgc2V0IHByb3BlcnRpZXModmFsdWU6IFByb3BlcnRpZXMpIHtcbiAgICB0aGlzLl9wcm9wZXJ0aWVzID0gdmFsdWU7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0U3lsZXMoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuICAgICAgPHN0eWxlPlxuICAgICAgICAqIHtcbiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICB9XG4gICAgICAgIDpob3N0IHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDQ1MHB4O1xuICAgICAgICAgIGhlaWdodDogMzgwcHg7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBhbmltYXRpb246IGZhZGUgMC40cyBsaW5lYXI7XG4gICAgICAgIH1cbiAgICAgICAgLnN0cmVhbWluZy1wbGF0Zm9ybS1jYXJkIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogMjRweCAyNHB4O1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC1hdXRvLXJvd3M6IG1pbi1jb250ZW50O1xuICAgICAgICAgIHBsYWNlLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZ2FwOiAxNHB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzA0MDcxNDtcbiAgICAgICAgfVxuICAgICAgICAuc3RyZWFtaW5nLXBsYXRmb3JtLWNhcmRfX2ltYWdlIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBoZWlnaHQ6IDEwMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5zdHJlYW1pbmctcGxhdGZvcm0tY2FyZF9fZGVzY3JpcHRpb24ge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgcm93LWdhcDogMTRweDtcbiAgICAgICAgICBmb250LXNpemU6IDEuOHJlbTtcbiAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBmYWRlIHtcbiAgICAgICAgICBmcm9tIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwcHgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0byB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICA8c3R5bGU+XG4gICAgYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRUZW1wbGF0ZSgpOiBIVE1MVGVtcGxhdGVFbGVtZW50IHtcbiAgICBjb25zdCB0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBgXG4gICAgICA8YXJ0aWNsZSBjbGFzcz1cInN0cmVhbWluZy1wbGF0Zm9ybS1jYXJkXCI+XG4gICAgICAgIDxpbWcgc3JjPSR7XG4gICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLmltZ1xuICAgICAgICB9IGFsdD1cInN0cmVhbWluZyBwbGF0Zm9ybVwiIGNsYXNzPVwic3RyZWFtaW5nLXBsYXRmb3JtLWNhcmRfX2ltYWdlXCIgLz5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN0cmVhbWluZy1wbGF0Zm9ybS1jYXJkX19kZXNjcmlwdGlvblwiPlxuICAgICAgICA8c3Bhbj5Db3N0byBtZW5zdWFsIGRlbCBjaW5lOiAke3RoaXMuZm9ybWF0UHJpY2UoXG4gICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLmNpbmVtYXByaWNlXG4gICAgICAgICl9IDwvc3Bhbj5cbiAgICAgICAgICAke3RoaXMucHJpY2VDb21wYXJhdG9yKHRoaXMucHJvcGVydGllcy5wbGFucyl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8L3NwYW4+XG4gICAgICA8L2FydGljbGU+XG4gICAgICAke3RoaXMuZ2V0U3lsZXMoKX1cbiAgICBgO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwcmljZUNvbXBhcmF0b3IocGxhbnM6IGFueSk6IGFueSB7XG4gICAgY29uc3QgcGxhbnNMaXN0ID0gcGxhbnNcbiAgICAgIC5tYXAoKHBsYW46IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBhbm51YWxQcmljZUNpbmFtZTogbnVtYmVyID0gdGhpcy5wcm9wZXJ0aWVzLmNpbmVtYXByaWNlICogMTI7XG4gICAgICAgIGlmIChwbGFuLnBsYW4gPT09IFwiQW51YWxcIikge1xuICAgICAgICAgIHJldHVybiBgPHNwYW4+UGxhbiAke3BsYW4ucGxhbn06ICR7dGhpcy5mb3JtYXRQcmljZShcbiAgICAgICAgICAgIHBsYW4ucHJpY2VcbiAgICAgICAgICApfSAke3RoaXMuc2F2ZU1vbmV5KHBsYW4ucHJpY2UsIGFubnVhbFByaWNlQ2luYW1lKX08L3NwYW4+YDtcbiAgICAgICAgfSBlbHNlIGlmIChwbGFuLnBsYW4gIT09IFwiQW51YWxcIikge1xuICAgICAgICAgIHJldHVybiBgPHNwYW4+UGxhbiAke3BsYW4ucGxhbn06ICR7dGhpcy5mb3JtYXRQcmljZShcbiAgICAgICAgICAgIHBsYW4ucHJpY2VcbiAgICAgICAgICApfSAke3RoaXMuc2F2ZU1vbmV5KHBsYW4ucHJpY2UsIHRoaXMucHJvcGVydGllcy5jaW5lbWFwcmljZSl9PC9zcGFuPmA7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuam9pbihcIlwiKTtcbiAgICByZXR1cm4gcGxhbnNMaXN0O1xuICB9XG5cbiAgcHJvdGVjdGVkIHNhdmVNb25leShwbGFuUHJpY2U6IG51bWJlciwgY2luZW1hUHJpY2U6IG51bWJlcikge1xuICAgIHJldHVybiBwbGFuUHJpY2UgPCBjaW5lbWFQcmljZVxuICAgICAgPyBgYWhvcnJhczogJHt0aGlzLmZvcm1hdFByaWNlKE1hdGguYWJzKHBsYW5QcmljZSAtIGNpbmVtYVByaWNlKSl9YFxuICAgICAgOiBgcGllcmRlczogJHt0aGlzLmZvcm1hdFByaWNlKE1hdGguYWJzKHBsYW5QcmljZSAtIGNpbmVtYVByaWNlKSl9YDtcbiAgfVxuXG4gIHByb3RlY3RlZCBmb3JtYXRQcmljZShwcmljZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBuZXdQaWNlID0gbmV3IHdpbmRvdy5JbnRsLk51bWJlckZvcm1hdChcImVuLUVOXCIsIHtcbiAgICAgIHN0eWxlOiBcImN1cnJlbmN5XCIsXG4gICAgICBjdXJyZW5jeTogXCJNWE5cIixcbiAgICB9KS5mb3JtYXQocHJpY2UpO1xuXG4gICAgcmV0dXJuIG5ld1BpY2U7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IHZvaWQge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiaWRcIiwgdGhpcy5wcm9wZXJ0aWVzLmlkKTtcbiAgICB0aGlzLnNoYWRvd1Jvb3Q/LmFwcGVuZENoaWxkKHRoaXMuZ2V0VGVtcGxhdGUoKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25Eb21DaGFuZ2VkKG11dGF0aW9uczogTXV0YXRpb25SZWNvcmRbXSk6IHZvaWQge1xuICAgIGlmIChtdXRhdGlvbnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgdGhpcy5fb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLCB7XG4gICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcbiAgICAgIHN1YnRyZWU6IHRydWUsXG4gICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgfSk7XG4gICAgd2hpbGUgKHRoaXMuc2hhZG93Um9vdD8uZmlyc3RDaGlsZCkge1xuICAgICAgdGhpcy5zaGFkb3dSb290Py5yZW1vdmVDaGlsZCh0aGlzLnNoYWRvd1Jvb3Q/LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBbXCJwcm9wZXJ0aWVzXCJdO1xuICB9XG5cbiAgcHVibGljIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgb2xkVmFsdWU6IGFueSxcbiAgICBuZXdWYWx1ZTogYW55XG4gICk6IHZvaWQge1xuICAgIGlmIChuYW1lID09PSBcInByb3BlcnRpZXNcIikge1xuICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gbmV3VmFsdWU7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHRoaXMuX29ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJzdHJlYW1pbmctcGxhdGZvcm0tY2FyZFwiLCBTdHJlYW1pbmdQbGF0Zm9ybUNhcmQpO1xuXG5leHBvcnQgZGVmYXVsdCBTdHJlYW1pbmdQbGF0Zm9ybUNhcmQ7XG4iLCJpbXBvcnQgUHJpY2VDb21wYXJhdG9yIGZyb20gXCIuL3BhZ2VzL1ByaWNlQ29tcGFyYXRvclwiO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgUHJpY2VDb21wYXJhdG9yKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLCBQcmljZUNvbXBhcmF0b3IpO1xuIiwiLy8gaW1wb3J0IHRoZSBmb3JtIGNvbXBvbmVudFxuaW1wb3J0IE1vdmllc0Zvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvbW92aWVzLWZvcm1cIjtcbi8vIGltcG9ydCB0aGUgc3RyZWFtaW5nLXBsYXRmb3JtLWJ1dHRvbiBjb21wb25lbnRcbmltcG9ydCBTdHJlYW1pbmdQbGF0Zm9ybUJ1dHRvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9zdHJlYW1pbmctcGxhdGZvcm0tYnV0dG9uXCI7XG4vLyBpbXBvcnQgdGhlIHN0cmVhbWluZy1wbGF0Zm9ybS1jYXJkIGNvbXBvbmVudFxuaW1wb3J0IFN0cmVhbWluZ1BsYXRmb3JtQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9zdHJlYW1pbmctcGxhdGZvcm0tY2FyZFwiO1xuLy8gaW1wb3J0IHRoZSBzdHJlbWFpbmcgcGxhdGZvcm0gZGF0YVxuaW1wb3J0IGRhdGEgZnJvbSBcIi4uL3V0aWxzL2RhdGFcIjtcblxuY29uc3QgUHJpY2VDb21wYXJhdG9yID0gKCkgPT4ge1xuICAvLyBwdXQgdGhlIGRhdGEgb2YgdGhlIHN0cmVhbWluZyBwbGF0Zm9ybXMgaW4gYSB2YXJpYWJsZVxuICBsZXQgcGxhdGZvcm1zOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBpbWc6IHN0cmluZztcbiAgICBpY29uOiBzdHJpbmc7XG4gICAgcGxhbnM6IHsgcGxhbjogc3RyaW5nOyBwcmljZTogbnVtYmVyIH1bXTtcbiAgfVtdID0gZGF0YTtcblxuICAvLyB2YXJpYWJsZSB0byBzdG9yZSB0aGUgZm9ybSB2YWx1ZXNcbiAgbGV0IGZvcm1WYWx1ZXM6IHtcbiAgICBudW1Nb3ZpZXM6IG51bWJlcjtcbiAgICBtb3ZpZVByaWNlOiBudW1iZXI7XG4gIH0gPSB7IG51bU1vdmllczogMCwgbW92aWVQcmljZTogMCB9O1xuXG4gIC8vIGZ1bmN0aW9uIHRvIGdldCBhbmQgc2V0IHRoZSBmb3JtIHZhbHVlcyBpbiB0aGUgZm9ybVZhbHVlcyB2YXJpYWJsZVxuICBjb25zdCBoYW5kbGVJbnB1dHMgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgaWYgKChldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2xhc3NOYW1lID09PSBcIm1vdmllcy1mb3JtX19pbnB1dFwiKSB7XG4gICAgICBmb3JtVmFsdWVzID0ge1xuICAgICAgICAuLi5mb3JtVmFsdWVzLFxuICAgICAgICBbKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5uYW1lXTogKFxuICAgICAgICAgIGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICAgICkudmFsdWUsXG4gICAgICB9O1xuICAgIH1cbiAgICAvLyBjaGFuZ2UgdGhlIGNpbmVtYXByaWNlIGF0cmlidXRlIGluIHRoZSBzdHJlYW1pbmctcGxhdGZvcm0tY2FyZCBlbGVtZW50c1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN0cmVhbWluZy1wbGF0Zm9ybXMtY2FyZHNcIikubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGNhcmRzOiBFbGVtZW50W10gPSBbXG4gICAgICAgIC4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzdHJlYW1pbmctcGxhdGZvcm0tY2FyZFwiKSxcbiAgICAgIF07XG4gICAgICBjb25zdCBjaW5lbWFQcmljZTogbnVtYmVyID0gZm9ybVZhbHVlcy5udW1Nb3ZpZXMgKiBmb3JtVmFsdWVzLm1vdmllUHJpY2U7XG4gICAgICBjYXJkcyA9IGNhcmRzLm1hcCgoY2FyZDogYW55KSA9PiB7XG4gICAgICAgIGNhcmQucHJvcGVydGllcy5jaW5lbWFwcmljZSA9IGNpbmVtYVByaWNlO1xuICAgICAgICByZXR1cm4gY2FyZDtcbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdHJlYW1pbmctcGxhdGZvcm1zLWNhcmRzXCIpIS5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdHJlYW1pbmctcGxhdGZvcm1zLWNhcmRzXCIpPy5hcHBlbmQoLi4uY2FyZHMpO1xuICAgIH1cbiAgfTtcblxuICAvLyBmdW5jdGlvbiB0byBhZGQgb3IgcmVtb3ZlIGEgc3RyZWFtaW5nLXBsYXRmb3JtLWNhcmQgZWxlbWVudCBmcm9tIHRoZSBET01cbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoZXZlbnQ6IGFueSkgPT4ge1xuICAgIGV2ZW50LnRhcmdldC5kaXNwbGF5ID0gIWV2ZW50LnRhcmdldC5kaXNwbGF5O1xuICAgIGNvbnN0IGNhcmREYXRhID0gcGxhdGZvcm1zLmZpbmQoXG4gICAgICAocGxhdGZvcm0pID0+IHBsYXRmb3JtLmlkID09PSBldmVudC50YXJnZXQubmFtZVxuICAgICk7XG4gICAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0cmVhbWluZy1wbGF0Zm9ybXMtY2FyZHNcIik7XG4gICAgY29uc3QgY2luZW1hUHJpY2UgPSBmb3JtVmFsdWVzLm51bU1vdmllcyAqIGZvcm1WYWx1ZXMubW92aWVQcmljZTtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmRpc3BsYXkpIHtcbiAgICAgIGNhcmRzPy5hcHBlbmQoXG4gICAgICAgIG5ldyBTdHJlYW1pbmdQbGF0Zm9ybUNhcmQoeyAuLi5jYXJkRGF0YSEsIGNpbmVtYXByaWNlOiBjaW5lbWFQcmljZSB9KVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FyZHM/LnJlbW92ZUNoaWxkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2V2ZW50LnRhcmdldC5uYW1lfWApISk7XG4gICAgfVxuICB9O1xuXG4gIC8vIHZhcmlhYmxlIHRvIGdldCB0aGUgbWFpbiBjb250YWluZXJcbiAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXBwXCIpO1xuXG4gIC8vIGNyZWF0ZSBhIGZvcm1cbiAgY29uc3QgZm9ybSA9IG5ldyBNb3ZpZXNGb3JtKCk7XG5cbiAgLy8gY3JlYXRlIGFuIGFycmF5IHRvIHN0b3JlIHRoZSBidXR0b25zIHRoYXQgd2lsbCBhZGQgb3IgcmVtb3ZlIGEgc3RyZWFtaW5nLXBsYXRmb3JtLWNhcmRcbiAgY29uc3QgYnV0dG9uc0FycmF5ID0gcGxhdGZvcm1zLm1hcCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0IGJ1dHRvbiA9IG5ldyBTdHJlYW1pbmdQbGF0Zm9ybUJ1dHRvbihcbiAgICAgIGl0ZW0uaWQsXG4gICAgICBpdGVtLmljb24sXG4gICAgICBmYWxzZSxcbiAgICAgIGhhbmRsZUNsaWNrXG4gICAgKTtcbiAgICByZXR1cm4gYnV0dG9uO1xuICB9KTtcblxuICAvLyBjcmVhdGUgYSBkaXYgbm9kZSB0byBhZGQgdGhlIGJ1dHRvbnNcbiAgY29uc3QgcGxhdGZvcm1zQnV0dG9uczogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBwbGF0Zm9ybXNCdXR0b25zLmNsYXNzTmFtZSA9IFwic3RyZWFtaW5nLXBsYXRmb3Jtcy1idXR0b25zXCI7XG5cbiAgLy8gYXBwZW5kIHRoZSBidXRvbnMgdG8gdGhlIGRpdiBub2RlXG4gIHBsYXRmb3Jtc0J1dHRvbnMuYXBwZW5kKC4uLmJ1dHRvbnNBcnJheSk7XG5cbiAgLy8gY3JlYXRlIGEgbm9kZSB0byBhZGQgb3IgcmVtb3ZlIGEgc3RyZWFtaW5nLXBsYXRmb3JtLWNhcmQgZWxlbWVudFxuICBjb25zdCBzdHJlYW1pbmdQbGF0Zm9ybXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBzdHJlYW1pbmdQbGF0Zm9ybXMuY2xhc3NOYW1lID0gXCJzdHJlYW1pbmctcGxhdGZvcm1zLWNhcmRzXCI7XG5cbiAgLy8gYW4gZXZlbnRMaXN0ZW5lciBpcyBhZGRlZCB0byBsaXN0ZW4gdGhlIGNoYW5nZXMgaW4gdGhlIGZvcm1cbiAgbWFpbj8uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGhhbmRsZUlucHV0cyk7XG5cbiAgLy8gdGhlIGZvcm0gYW5kIGJ1dHRvbnMgYXJlIGFkZGVkIHRvIHRoZSBtYWluIGNvbnRhaW5lclxuICBtYWluPy5hcHBlbmQoZm9ybSwgcGxhdGZvcm1zQnV0dG9ucywgc3RyZWFtaW5nUGxhdGZvcm1zKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFByaWNlQ29tcGFyYXRvcjtcbiIsIi8vIGltcG9ydCBpbWFnZXMgYW5kIGljb25zXG5pbXBvcnQgYW1hem9uSWNvbiBmcm9tIFwiLi4vYXNzZXRzL2ljb25zL2ljb25zOC1hbWF6b24tcHJpbWUtdmlkZW8uc3ZnXCI7XG5pbXBvcnQgbmV0ZmxpeEljb24gZnJvbSBcIi4uL2Fzc2V0cy9pY29ucy9pY29uczgtYXBsaWNhY2nDs24tZGUtZXNjcml0b3Jpby1kZS1uZXRmbGl4LnN2Z1wiO1xuaW1wb3J0IGRpc25leUljb24gZnJvbSBcIi4uL2Fzc2V0cy9pY29ucy9pY29uczgtZGlzbmV5LXBsdXMuc3ZnXCI7XG5pbXBvcnQgYW1hem9uSW1hZ2UgZnJvbSBcIi4uL2Fzc2V0cy9pbWFnZXMvYW1hem9uLnN2Z1wiO1xuaW1wb3J0IG5ldGZsaXhJbWFnZSBmcm9tIFwiLi4vYXNzZXRzL2ltYWdlcy9uZXRmbGl4LnN2Z1wiO1xuaW1wb3J0IGRpc25leUltYWdlIGZyb20gXCIuLi9hc3NldHMvaW1hZ2VzL2Rpc25leS5zdmdcIjtcblxuLy8gY3JlYXRlIGFuIG9iamVjdCB3aXRoIHRoZSBpbmZvcm1hdGlvbiBvZiB0aGUgc3RyZWFtaW5nIHBsYXRmb3Jtc1xuY29uc3QgcGxhdGZvcm1zOiB7XG4gIGlkOiBzdHJpbmc7XG4gIGltZzogc3RyaW5nO1xuICBpY29uOiBzdHJpbmc7XG4gIHBsYW5zOiB7IHBsYW46IHN0cmluZzsgcHJpY2U6IG51bWJlciB9W107XG59W10gPSBbXG4gIHtcbiAgICBpZDogXCJhbWF6b25cIixcbiAgICBpbWc6IGFtYXpvbkltYWdlLFxuICAgIGljb246IGFtYXpvbkljb24sXG4gICAgcGxhbnM6IFtcbiAgICAgIHsgcGxhbjogXCJNZW5zdWFsXCIsIHByaWNlOiA3NSB9LFxuICAgICAgeyBwbGFuOiBcIkFudWFsXCIsIHByaWNlOiA4OTkgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgaWQ6IFwibmV0ZmxpeFwiLFxuICAgIGltZzogbmV0ZmxpeEltYWdlLFxuICAgIGljb246IG5ldGZsaXhJY29uLFxuICAgIHBsYW5zOiBbXG4gICAgICB7IHBsYW46IFwiQsOhc2ljb1wiLCBwcmljZTogMTM5IH0sXG4gICAgICB7IHBsYW46IFwiRXN0w6FuZGFyXCIsIHByaWNlOiAxOTYgfSxcbiAgICAgIHsgcGxhbjogXCJQcmVtaXVtXCIsIHByaWNlOiAyNjYgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgaWQ6IFwiZGlzbmV5XCIsXG4gICAgaW1nOiBkaXNuZXlJbWFnZSxcbiAgICBpY29uOiBkaXNuZXlJY29uLFxuICAgIHBsYW5zOiBbXG4gICAgICB7IHBsYW46IFwiTWVuc3VhbFwiLCBwcmljZTogMTU5IH0sXG4gICAgICB7IHBsYW46IFwiQW51YWxcIiwgcHJpY2U6IDE1OTkgfSxcbiAgICBdLFxuICB9LFxuXTtcblxuZXhwb3J0IGRlZmF1bHQgcGxhdGZvcm1zO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oODIwKTtcbiJdLCJuYW1lcyI6WyJNb3ZpZXNGb3JtIiwiSFRNTEZvcm1FbGVtZW50IiwiY29uc3RydWN0b3IiLCJzdXBlciIsImdldFN0eWxlcyIsImdldFRlbXBsYXRlIiwidGVtcGxhdGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJ0aGlzIiwicmVuZGVyIiwiY2xhc3NOYW1lIiwiYXBwZW5kIiwiY29udGVudCIsImNsb25lTm9kZSIsImNvbm5lY3RlZENhbGxiYWNrIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJleHRlbmRzIiwiU3RyZWFtaW5nUGxhdGZvcm1CdXR0b24iLCJIVE1MRWxlbWVudCIsIm5hbWUiLCJpbWFnZSIsImRpc3BsYXkiLCJoYW5kbGVDbGljayIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJfbmFtZSIsIl9pbWFnZSIsIl9kaXNwbGF5IiwiYmluZCIsIl9vYnNlcnZlciIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJtdXRhdGlvbnMiLCJvbkRvbUNoYW5nZWQiLCJ2YWx1ZSIsImdldFRlbXBsZXRlIiwidGVtcGxldGUiLCJhZGRFdmVudExpc3RlbmVyIiwic2hhZG93Um9vdCIsImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayIsIm9sZFZhbHVlIiwibmV3VmFsdWUiLCJkaXNjb25uZWN0ZWRDYWxsYmFjayIsImRpc2Nvbm5lY3QiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiU3RyZWFtaW5nUGxhdGZvcm1DYXJkIiwicHJvcGVydGllcyIsIl9wcm9wZXJ0aWVzIiwiZ2V0U3lsZXMiLCJpbWciLCJmb3JtYXRQcmljZSIsImNpbmVtYXByaWNlIiwicHJpY2VDb21wYXJhdG9yIiwicGxhbnMiLCJtYXAiLCJwbGFuIiwiYW5udWFsUHJpY2VDaW5hbWUiLCJwcmljZSIsInNhdmVNb25leSIsImpvaW4iLCJwbGFuUHJpY2UiLCJjaW5lbWFQcmljZSIsIk1hdGgiLCJhYnMiLCJ3aW5kb3ciLCJJbnRsIiwiTnVtYmVyRm9ybWF0Iiwic3R5bGUiLCJjdXJyZW5jeSIsImZvcm1hdCIsInNldEF0dHJpYnV0ZSIsImlkIiwiYXBwZW5kQ2hpbGQiLCJvYnNlcnZlIiwiYXR0cmlidXRlcyIsImNoYXJhY3RlckRhdGEiLCJzdWJ0cmVlIiwiY2hpbGRMaXN0IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwicGxhdGZvcm1zIiwiZm9ybVZhbHVlcyIsIm51bU1vdmllcyIsIm1vdmllUHJpY2UiLCJldmVudCIsInRhcmdldCIsImNhcmREYXRhIiwiZmluZCIsInBsYXRmb3JtIiwiY2FyZHMiLCJxdWVyeVNlbGVjdG9yIiwibWFpbiIsImdldEVsZW1lbnRCeUlkIiwiZm9ybSIsImJ1dHRvbnNBcnJheSIsIml0ZW0iLCJpY29uIiwicGxhdGZvcm1zQnV0dG9ucyIsInN0cmVhbWluZ1BsYXRmb3JtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJjYXJkIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsImUiLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiRXJyb3IiLCJyZXBsYWNlIiwicCJdLCJzb3VyY2VSb290IjoiIn0=